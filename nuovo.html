<!DOCTYPE html>
<html>
<head>
    <title>Genera Codice QR</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
</head>
<body>
<div id="printable">
    <p>Codice QR Generato<br></p>
    <div id="qrcode"></div>
</div>
<br>
<button id="qrprint">STAMPA</button>

<script>
    window.addEventListener("load", function() {


        var qrc = new QRCode(document.getElementById("qrcode"), {
            text: "tel:3279974480",
            width: 200,
            height: 200,
            colorDark: "#000000"
        });


        document.getElementById("qrprint").addEventListener("click", function() {
            var printwin = window.open("");
            printwin.document.write(document.getElementById("printable").innerHTML);
            printwin.document.close();

            printwin.onload = function() {
                let qr = printwin.document.querySelector("#qrcode img") ||
                    printwin.document.querySelector("#qrcode canvas");

                if (qr) {
                    if (qr.tagName.toLowerCase() === "img") {
                        qr.onload = function() {
                            printwin.print();
                            printwin.close();
                        };
                    } else {
                        printwin.print();
                        printwin.close();
                    }
                } else {
                    printwin.print();
                    printwin.close();
                }
            };
        });
    });
</script>
</body>
</html>

